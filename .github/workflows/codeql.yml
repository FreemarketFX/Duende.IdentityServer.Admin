name: CodeQL
on:
  workflow_dispatch:
  push:
    branches: [ 'main' ] 
  pull_request:
    branches: [ 'main' ]
  schedule:
    - cron: '20 13 * * 6'
jobs:
  codeql-shared-workflow:
    uses: FreemarketFX/gha-shared-workflows/.github/workflows/codeql.yml@main
    secrets: inherit
    with:
      analyse-csharp: true
      csharpBuildCommands: |-
        dotnet build Skoruba.Duende.IdentityServer.Admin.EntityFramework\Skoruba.Duende.IdentityServer.Admin.EntityFramework.csproj --configuration Release
        dotnet build Skoruba.Duende.IdentityServer.Admin.EntityFramework.Identity\Skoruba.Duende.IdentityServer.Admin.EntityFramework.Identity.csproj --configuration Release
        dotnet build Skoruba.Duende.IdentityServer.Admin.EntityFramework.Configuration\Skoruba.Duende.IdentityServer.Admin.EntityFramework.Configuration.csproj --configuration Release
        dotnet build Skoruba.Duende.IdentityServer.Admin.EntityFramework.Extensions\Skoruba.Duende.IdentityServer.Admin.EntityFramework.Extensions.csproj --configuration Release
        dotnet build Skoruba.Duende.IdentityServer.Admin.UI\Skoruba.Duende.IdentityServer.Admin.UI.csproj --configuration Release
        dotnet build Skoruba.Duende.IdentityServer.Admin.BusinessLogic\Skoruba.Duende.IdentityServer.Admin.BusinessLogic.csproj --configuration Release
        dotnet build Skoruba.Duende.IdentityServer.Admin.BusinessLogic.Identity\Skoruba.Duende.IdentityServer.Admin.BusinessLogic.Identity.csproj --configuration Release
        dotnet build Skoruba.Duende.IdentityServer.Admin.BusinessLogic.Shared\Skoruba.Duende.IdentityServer.Admin.BusinessLogic.Shared.csproj --configuration Release
        dotnet build Skoruba.Duende.IdentityServer.Shared.Configuration\Skoruba.Duende.IdentityServer.Shared.Configuration.csproj --configuration Release
